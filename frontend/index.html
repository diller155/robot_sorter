<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –†–æ–±–æ—Ç–∞-–°–æ—Ä—Ç—É–≤–∞–ª—å–Ω–∏–∫–∞</title>
  <link rel="stylesheet" href="css/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
</head>

<body>
  <header>
    <h1>–ü–∞–Ω–µ–ª—å –ö–µ—Ä—É–≤–∞–Ω–Ω—è –†–æ–±–æ—Ç–æ–º</h1>
  </header>
  <nav>
    <a href="#" data-section="smart">–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è</a>
    <a href="#" data-section="sensors">–°–µ–Ω—Å–æ—Ä–∏</a>
    <a href="#" data-section="log">–ñ—É—Ä–Ω–∞–ª</a>
    <a href="#" data-section="analytics">–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞</a>
    <a href="#" data-section="settings">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</a>

    <button id="logoutBtn" style="margin-left:auto; background:transparent; border:none; color:#fff; cursor:pointer;">
    –í–∏–π—Ç–∏
    </button>
  </nav>
  <main class="container">
    <section id="smart" class="section active">
      <div class="disabled-msg"></div>
      <div class="section-content">
        <div class="card">
          <h2>üß† –†–æ–∑—É–º–Ω–µ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è</h2>
          <div class="sensor-grid" id="smartSensorGrid"></div>
          <button class="btn" id="smartSortBtn">–†–æ–∑—É–º–Ω–µ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è</button>
          <div id="logArea">
            <h3>–õ–æ–≥ —Ä—ñ—à–µ–Ω—å:</h3>
            <div id="logOutput"></div>
          </div>
        </div>
      </div>
    </section>

    <section id="sensors" class="section">
      <div class="disabled-msg"></div>
      <div class="section-content">
        <div class="card">
          <h2>
            –ü–æ–∫–∞–∑–Ω–∏–∫–∏ –°–µ–Ω—Å–æ—Ä—ñ–≤ 
            <button id="addSensorBtn" class="btn">‚ûï –î–æ–¥–∞—Ç–∏ —Å–µ–Ω—Å–æ—Ä</button>
          </h2>
          <!-- –ú—ñ—Å—Ü–µ –¥–ª—è –ø—ñ–¥–ø–∏—Å—É –±–∞—Ç—á—É -->
          <h3 id="batchLabel" style="text-align:center; margin-bottom:0.5rem;">–û–±‚Äô—î–∫—Ç #‚Äî</h3>
          <div class="sensor-grid" id="sensorGrid"></div>
        </div>
      </div>
    </section>


    <section id="log" class="section">
      <div class="disabled-msg"></div>
      <div class="section-content">
        <div class="card">
          <h2>–ñ—É—Ä–Ω–∞–ª –°–æ—Ä—Ç—É–≤–∞–Ω—å</h2>
          <button class="btn" id="simulateLogsBtn">–ù–∞–¥–∞—Ç–∏ 10 –∑–∞–ø–∏—Å—ñ–≤</button>
          <table id="logTable">
            <tr><th>ID</th><th>–ß–∞—Å</th><th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th><th>–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å</th><th>–ö–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å</th></tr>
          </table>
        </div>
      </div>
    </section>

    <section id="analytics" class="section">
      <div class="disabled-msg"></div>
      <div class="section-content analytics-grid">

        <div class="card">
          <h2>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</h2>
          <div class="chart-container">
            <canvas id="tempChart"></canvas>
          </div>
        </div>

        <div class="card">
          <h2>–í–∞–≥–∞ –≤–∏—Ä–æ–±—É</h2>
          <div class="chart-container">
            <canvas id="weightChart"></canvas>
          </div>
        </div>

        <div class="card">
          <h2>–ó—É—Å–∏–ª–ª—è –∑–∞—Ö–≤–∞—Ç—É</h2>
          <div class="chart-container">
            <canvas id="forceChart"></canvas>
          </div>
        </div>

        <div class="card">
          <h2>–í–æ–ª–æ–≥—ñ—Å—Ç—å</h2>
          <div class="chart-container">
            <canvas id="humidityChart"></canvas>
          </div>
        </div>

        <div class="card">
          <h2>–ß–∞—Å –ø–µ—Ä–µ–±—É–≤–∞–Ω–Ω—è</h2>
          <div class="chart-container">
            <canvas id="cycleChart"></canvas>
          </div>
        </div>
      </div>
    </section>


    <section id="settings" class="section">
      <div class="disabled-msg"></div>
      <div class="section-content">
        <div class="card">
          <h2>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2>

          <div class="settings-button-group">
            <button class="btn btn-enable" id="enableSystemBtn" style="background-color: var(--primary);">–£–≤—ñ–º–∫–Ω—É—Ç–∏ —Å–∏—Å—Ç–µ–º—É</button>
            <button class="btn btn-disable" id="disableSystemBtn" style="background-color: var(--danger);">–í–∏–º–∫–Ω—É—Ç–∏ —Å–∏—Å—Ç–µ–º—É</button>
          </div>

          <div id="settingsControls">
            <!-- ===== –ù–æ–≤–∏–π –ø–æ–≤–∑—É–Ω–æ–∫ –¥–ª—è —ñ–Ω—Ç–µ—Ä–≤–∞–ª—É —Å–µ–Ω—Å–æ—Ä—ñ–≤ ===== -->
            <div style="margin-top:1rem; text-align:center;">
              <label for="sensorInterval">–®–≤–∏–¥–∫—ñ—Å—Ç—å –∫–æ–Ω–≤–µ—î—Ä–∞: (—Å): 
                <span id="sensorIntervalLabel">10</span>
              </label>
              <input id="sensorInterval"
                    type="range"
                    min="1" max="10" step="1" value="10"
                    style="width:100%;"/>
            </div>

            <div style="margin-top:1rem; text-align:center;">
              <button id="toggleConveyorBtn" class="btn">
                ‚è∏Ô∏è –ü–∞—É–∑–∞ –∫–æ–Ω–≤–µ—î—Ä–∞
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer id="systemStatus">
    <div class="status-item"><span id="statusText"></span></div>
    <div class="status-item">üå° –¢–µ–º–ø: <span id="tempStatus">--</span></div>
    <div class="status-item">üîî –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è: <span id="alertStatus">--</span></div>
  </footer>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è toast-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å -->
  <div id="notification-container" class="notification-container"></div>

  <script src="js/auth-check.js"></script>
  <script type="module" src="js/api.js"></script>
  

  <script>
    document.getElementById('logoutBtn').addEventListener('click', () => {
      localStorage.removeItem('token');
      localStorage.removeItem('role');
      window.location = 'login.html';
    });
  </script>
  
  <script type="module" src="js/script.js"></script>

</body>
</html>
